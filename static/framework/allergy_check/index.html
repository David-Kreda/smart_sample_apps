<!DOCTYPE html>
<html>
  <head>
    <title>Conflicts?</title>
  </head>
  <body>

  <h2 style="font-family: Arial, sans-serif;">Drug/Allergy Conflicts?</h2>
  <span id="TheAnswer" style="font-weight: bold; font-size: 60pt; font-family: Arial, sans-serif; text-decoration: none; color: black;">
  	...
  </span> 
    <script src="../smart/scripts/smart-api-client.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
	<script>
	  SMART.ready(function(){
				SMART.webhook_post("check_allergies", {}, function(rdf) {
					var ta = $("#TheAnswer");
					ta.html("");
				
					// And examine the result for any drug/allergy conflicts,
					// displaying each to the user
					rdf.where("?s sp:conflict ?c").each(function(){
						ta.append($("<li>"+this.c.value+"</li>"));						
					});
					
					// Phew!
					if (ta.html() === "") ta.html("None");
				});
	  });
	</script>
  </body>
</html>
